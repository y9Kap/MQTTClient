This is a working example of an MQTT client on esp32 that sends temperature, humidity, pressure and other messages to a broker. The libraries used are:
https://github.com/marvinroger/async-mqtt-client  //
https://github.com/adafruit/Adafruit_SHTC3  //
https://github.com/adafruit/Adafruit_AHTX0  //
https://github.com/adafruit/Adafruit-BMP085-Library  //
https://github.com/sui77/rc-switch
